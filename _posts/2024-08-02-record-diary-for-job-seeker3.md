---
title: "#취준일기_240802"
excerpt: "생각 날 때마다 남기는 이런저런 기록. 240822 블로그 옮김"

categories:
  - Daily Record
tags:
  - [AWS, TIL]

permalink: /record/diary-for-job-seeker3/

toc: true
toc_sticky: true

date: 2024-08-02
last_modified_at: 2024-08-22
---

>🌱 Today I Learned... 
AWS 과금이슈, 프리티어, 그리고 public IPv4 address

### 1. AWS 과금 이슈 트레킹

지난 6월 구글링해가며 포폴용으로 만든 프로젝트를 AWS로 배포했다.
1년 간은 프리티어로 쓸 수 있다고 하니 조금쯤 안심하고 있었고, 다행히 6월을 무난히 넘기며 모니터링을 살짝 잊을 무렵.....
웬걸 지난 달엔 __소액__이지만 과금이 발생했다..!!

1달러(=260원? 정도인가 봄)도 안되는 돈이지만 땅을 파도 10원 한 장 안나오는데 왜 청구되는지는 알아야 할거 아니냐고😰

월말부터해서 한 삼일 간 열심히 구글링해서 찾아봤는데.. 아직까지도 정확한 원인을 찾지 못했다.🥲 ~~대체 어디서 새는 건지...~~

찾아보니 대체로 EIP를 생성하고 연결되지 않은 경우나 Route 53 쓰면서 청구되는 것 같던데, 내 경우엔 해당하지 않는 것 같다.
속상하지만 일단 찾아본 내용만이라도 남겨놓고, 이번 달 사용 추이를 다시 봐야할 것 같다.

![](https://velog.velcdn.com/images/92miindy/post/ba929baa-7a7f-4f91-9f62-4cb2ca7c22e3/image.png)


![](https://velog.velcdn.com/images/92miindy/post/ba3c8198-5665-4d5b-9fd1-b9cc801258ca/image.png)


#### 1.  Public IPv4는 무료가 아니다.

Free Tier 서비스의 이용자들은 1달 750시간의 무료 사용량을 제공받을 수 있다.
즉 2개 이상의 Public IPv4를 할당받아 사용 중일 경우, EC2 인스턴스에 할당된 Public IPv4를 제외한 것들은 모두 사용 시간에 따라 요금이 발생하게되는 것.
구글링해보니 일반적으로는 RDS 인스턴스 사용 중에 생성되는 IP로 인해 청구되는 것 같던데, 나는 RDS를 쓰지 않고 있었고 VPC IP Address Manager로 확인했을 때도 1개로 확인되는 걸 보니..🤦🏻‍♀️

~~또는 보안접속으로 HTTPS 도입할 때 Application Load Balancer로 서브넷을 쓰면서 발생하는 경우도 있던데 마찬가지로 해당 없음 에라이~~

![](https://velog.velcdn.com/images/92miindy/post/35201760-88c4-4f85-b5f1-4ad02b5a5bf5/image.png)

#### 2.  Route 53도 당연히 공짜가 아니다...?!
이건 지난 번에 DNS를 적용하고 싶어서 찾다가 알게 된 것.
무료 도메인사이트에서 도메인을 발급받아 적용해보려다 몇가지 이유로 중단하고, 현재까지 포폴에는 그냥 IP주소로 기재해서 돌리고 있는 상태 😭

![](https://velog.velcdn.com/images/92miindy/post/0abd1532-00e8-45ce-98da-a3ba850e77b9/image.png)

그런데 도메인을 어찌저찌 무료로 얻었다고 해도 
Route 53은 호스팅 영역(HostedZone) 하나 당 $0.5 (VAT 별도) 비용이 나가기 때문에 요금이 발생한다는 것?! 🤷🏻‍♀️
숫자 IP가 아닌,  `www.amazon.com` 처럼 알아보기 쉬운 도메인 이름으로 접속하려면 Route 53의 HostedZone이 필요하니... 과금이 불가피하다는거겠지..? 
~~답은 역시 유료 결제 뿐인가ㅠㅠ 도메인도 사고, 호스팅비용도 내고..? 무료로 시작이라며어어~~

#### 3.  데이터 전송요금은 왜 발생했을까?

심지어 오레곤이랑 버지니아로 옮겼었다는데. 대체 언제? 왜????

찾아보니 AMI를 이용해 인스턴스 지역변경하면서 비용이 발생했다는 포스팅이 있었고.. 아마 나도 비슷한 경우가 있었지 않았나 싶다.
한번 리전 설정을 잘못해서 다시 세팅한 기억이 있어 <u>정확하진 않지만</u> 같은 이유이지 않을까 추측 중🧐
~~(근데 두번이나 그랬다고??...는 기억안남 이슈...)~~

#### ✏️ *결과적으로는 명확한 원인을 찾지 못한 상태다.*
이번 달 사용해 보면서 청구서도 받아보면 좀 더 단서를 찾을 수 있지 않을까. ~~투비컨티뉴~~

---

### 2. 퍼블릭 IP, 프라이빗 IP, 탄력적 IP

- __퍼블릭 IP__ : 인터넷 상에서 개개인의 로컬 네트워크를 구분하기 위해 ISP에서 제공하는 IP 주소이다. 인터넷 상에서 주소 하나하나가 고유함으로 중복되는 일이 없고, 외부에 공개되어있어 다른 인터넷 사용자들이 나에게 접속 할 수 있다.
- __프라이빗 IP__ : 외부에서는 접속할 수 없으면서 특정 네트워크 망 내부에서만 접근할 수 있는 IP. 사용할 수 있는 IP 대역이 정해져 있다.

#### AWS EC2에서 IP사용
처음 EC2 인스턴스를 만들면 퍼블릭 IPv4 주소와 프라이빗 IPv4 주소가 할당된다.

이렇게만 보면 EC2사용에 문제가 없어보이지만!
실행 중인 인스턴스를 중지한 후 다시 실행했을 때, 프라이빗 IPv4 주소는 그대로인 것과는 달리 퍼블릭 IPv4 주소가 변경된 것을 확인할 수 있다. 
즉, AWS는 인스턴스가 처음 생성되거나, 중지 후 다시 시작할때마다 퍼블릭 IP를 재할당한다. 퍼블릭 IP를 유동적으로 관리하는 것.
따라서 고정된 IP주소를 사용하기 위해 탄력적 IP를 생성해 인스턴스에 연결해줌으로써, 인스턴스 중지 후 재시작 해도 똑같은 IP 주소를 사용할 수 있다. 
~~DNS 주소를 만들어서 Route53을 통해 등록한 후 서비스를 안정적으로 제공할 수도 있을 것이고~~
(이 부분은 기회가 된다면 전 과정을 기록해놓으면 좋을 것 같다.)


